// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Model for Admin Users
// We will not have a public sign-up, so admins are added manually to the DB
model User {
  id            String  @id @default(cuid())
  email         String  @unique
  hashedPassword String
  
  // For 2-Factor Authentication (TOTP - Authenticator App)
  twoFactorEnabled Boolean @default(false)
  twoFactorSecret  String? // This will store the ASCII representation of the secret
  
  // For Email OTP 2FA
  emailOtpEnabled Boolean @default(true)
  otpCode         String?
  otpExpiresAt    DateTime?
}

// Model for the Certificates
model Certificate {
  id                  String     @id @unique @default(cuid()) // This is the unique verifiable ID
  registrationNumber  String     @unique // Unique registration number for each student
  studentName         String
  course              String     // Course name (e.g., "DCA", "ADCA", "Tally")
  duration            String     // Duration (e.g., "6 Months", "12 Months")
  startDate           DateTime   // Course start date
  endDate             DateTime   // Course end date
  issueDate           DateTime   // Certificate issue date
  
  // Status must be one of these two values
  status              CertificateStatus @default(VERIFIED)
  
  createdAt           DateTime   @default(now())
  updatedAt           DateTime   @updatedAt
}

enum CertificateStatus {
  VERIFIED
  UNVERIFIED
}

